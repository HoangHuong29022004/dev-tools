# üêö Zsh Setup Guide - H∆∞·ªõng d·∫´n c√†i ƒë·∫∑t Zsh

## üìã T·ªïng quan

Zsh (Z Shell) l√† shell m·∫°nh m·∫Ω v√† linh ho·∫°t h∆°n Bash, v·ªõi nhi·ªÅu t√≠nh nƒÉng t·ª± ƒë·ªông ho√†n th√†nh, syntax highlighting, v√† ecosystem plugin phong ph√∫. ƒê·∫∑c bi·ªát ph√π h·ª£p cho Laravel/PHP development.

## üöÄ C√†i ƒë·∫∑t Zsh + Oh My Zsh

### B∆∞·ªõc 1: C√†i Zsh
```bash
brew install zsh
```

### B∆∞·ªõc 2: C√†i Oh My Zsh
```bash
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended
```

### B∆∞·ªõc 3: C√†i plugins n√¢ng cao
```bash
brew install zsh-autosuggestions zsh-syntax-highlighting fzf starship
```

### B∆∞·ªõc 4: Setup FZF
```bash
$(brew --prefix)/opt/fzf/install --all
```

### B∆∞·ªõc 5: Th√™m Zsh v√†o h·ªá th·ªëng
```bash
echo '/opt/homebrew/bin/zsh' | sudo tee -a /etc/shells
chsh -s /opt/homebrew/bin/zsh
```

## ‚öôÔ∏è C·∫•u h√¨nh Starship Prompt

T·∫°o file `~/.config/starship.toml`:

```toml
# Starship Configuration - Clean & Simple

# Disable Python version
[python]
disabled = true

# Show full directory path
[directory]
style = "cyan"
truncation_length = 0
truncate_to_repo = false

# Git branch
[git_branch]
symbol = "üå± "
style = "green"

# Git status
[git_status]
style = "red"
format = "([\\[$all_status$ahead_behind\\]]($style) )"

# Character prompt
[character]
success_symbol = "[‚ùØ](bold green)"
error_symbol = "[‚ùØ](bold red)"

# Disable unnecessary modules
[package]
disabled = true

[nodejs]
disabled = true

[rust]
disabled = true

[golang]
disabled = true

[java]
disabled = true

[ruby]
disabled = true

[php]
disabled = true

[elixir]
disabled = true

[elm]
disabled = true

[zig]
disabled = true

[ocaml]
disabled = true

[haskell]
disabled = true

[swift]
disabled = true

[scala]
disabled = true

[kotlin]
disabled = true

[dart]
disabled = true

[cmake]
disabled = true

[meson]
disabled = true

[nim]
disabled = true

[perl]
disabled = true

[conda]
disabled = true

[memory_usage]
disabled = true

[env_var]
disabled = true

[aws]
disabled = true

[gcloud]
disabled = true

[azure]
disabled = true

[kubernetes]
disabled = true

[docker_context]
disabled = true

[terraform]
disabled = true

[openstack]
disabled = true

[cmd_duration]
disabled = true

[time]
disabled = true

[username]
disabled = true

[hostname]
disabled = true

[shlvl]
disabled = true

[shell]
disabled = true

[status]
disabled = true

[line_break]
disabled = true

[fill]
disabled = true

[os]
disabled = true

[container]
disabled = true

[spack]
disabled = true

[singularity]
disabled = true

[vcsh]
disabled = true

[hg_branch]
disabled = true

[battery]
disabled = true

[dotnet]
disabled = true

[erlang]
disabled = true

[gradle]
disabled = true

[julia]
disabled = true

[lua]
disabled = true

[nix_shell]
disabled = true

[opa]
disabled = true

[pulumi]
disabled = true

[purescript]
disabled = true

[r]
disabled = true

[red]
disabled = true

[vagrant]
disabled = true
```

## üîß C·∫•u h√¨nh .zshrc

File `~/.zshrc` s·∫Ω ch·ª©a:

```bash
# Oh My Zsh Configuration
export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME=""  # Disable Oh My Zsh theme, using Starship instead

# Plugins
plugins=(
  git
  docker
  composer
  npm
  brew
  macos
  colored-man-pages
  command-not-found
)

source $ZSH/oh-my-zsh.sh

# ===========================================
# ENHANCED PLUGINS
# ===========================================

# Auto-suggestions (Fish-like)
source /opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh

# Syntax highlighting
source /opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

# FZF integration
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# Starship prompt (beautiful and fast)
eval "$(starship init zsh)"

# ===========================================
# CUSTOM CONFIGURATION
# ===========================================

# Environment Variables
export PATH="/opt/homebrew/bin:/opt/homebrew/sbin:$PATH"
export LANG="en_US.UTF-8"
export LC_ALL="en_US.UTF-8"
export EDITOR="nano"

# Node.js
export PATH="node_modules/.bin:$PATH"

# PHP/Composer
export PATH="$HOME/.composer/vendor/bin:$PATH"

# ===========================================
# ALIASES
# ===========================================

# Laravel
alias art="php artisan"
alias sail="./vendor/bin/sail"
alias serve="php -S localhost:8000"

# Project creation shortcuts
alias mk="python3 ~/dev-tools/mkproject.py"
alias mkcode="python3 ~/dev-tools/mkproject.py"
alias mktest="python3 ~/dev-tools/mkproject.py"

# Git
alias g="git"
alias gst="git status"
alias gaa="git add ."
alias gcm='git commit -m'
alias gco="git checkout"
alias gpl="git pull"
alias gps="git push"

# VS Code v√† Cursor
alias code="/Applications/Visual\ Studio\ Code.app/Contents/Resources/app/bin/code"
alias cursor="/Applications/Cursor.app/Contents/Resources/app/bin/code"

# Docker
alias d="docker"
alias dc="docker-compose"
alias dps="docker ps"

# npm/yarn
alias ni="npm install"
alias nr="npm run"
alias dev="npm run dev"
alias build="npm run build"
alias yi="yarn install"
alias yd="yarn dev"

# Laravel Commands
alias porcl="php artisan route:clear && php artisan config:clear && php artisan cache:clear && php artisan view:clear && php artisan optimize"
alias pcl="php artisan cache:clear && php artisan view:clear"
alias prl="php artisan route:list"
alias pcc="php artisan cache:clear"
alias pvc="php artisan view:clear"
alias po="php artisan optimize"

# ===========================================
# FUNCTIONS
# ===========================================

# Function chuy·ªÉn ƒë·ªïi PHP version (FAST VERSION)
switch-php() {
    if [[ $# -eq 0 ]]; then
        echo "‚ùå Vui l√≤ng nh·∫≠p phi√™n b·∫£n PHP. V√≠ d·ª•: switch-php 7.4"
        return 1
    fi

    local phpver=$1
    local php_formula="php@$phpver"

    if [[ ! -d "/opt/homebrew/opt/$php_formula" ]]; then
        echo "‚ùå PHP $phpver ch∆∞a ƒë∆∞·ª£c c√†i. C√†i b·∫±ng: brew install $php_formula"
        return 1
    fi

    echo "‚ö° Chuy·ªÉn sang PHP $phpver..."

    # Ch·ªâ unlink PHP hi·ªán t·∫°i v√† link PHP m·ªõi (kh√¥ng touch services)
    brew unlink php >/dev/null 2>&1
    brew unlink $php_formula >/dev/null 2>&1
    brew link --force --overwrite $php_formula >/dev/null

    # C·∫≠p nh·∫≠t PATH ngay l·∫≠p t·ª©c
    export PATH="/opt/homebrew/opt/$php_formula/bin:/opt/homebrew/opt/$php_formula/sbin:$PATH"

    echo "‚úÖ PHP $phpver"
    php -v | head -1
}

# Function c√†i ƒë·∫∑t PHP m·ªõi
install-php() {
    local phpver=${1:-"7.4"}
    local php_formula="php@$phpver"

    # C√†i ƒë·∫∑t PHP
    echo "üì¶ ƒêang c√†i ƒë·∫∑t PHP $phpver..."
    brew install $php_formula

    # Chuy·ªÉn sang PHP version m·ªõi
    switch-php $phpver

    echo "üéâ PHP $phpver ƒë√£ ƒë∆∞·ª£c c√†i ƒë·∫∑t th√†nh c√¥ng!"
}

# Function ch·∫°y composer v·ªõi PHP version c·ª• th·ªÉ
composer-with-php() {
    if [[ $# -lt 2 ]]; then
        echo "‚ùå C√∫ ph√°p: composer-with-php <php_version> <composer_command>"
        echo "V√≠ d·ª•: composer-with-php 8.2 install"
        echo "V√≠ d·ª•: composer-with-php 7.4 update"
        return 1
    fi

    local phpver=$1
    shift
    local composer_cmd="$@"
    local php_formula="php@$phpver"

    if [[ ! -d "/opt/homebrew/opt/$php_formula" ]]; then
        echo "‚ùå PHP $phpver ch∆∞a ƒë∆∞·ª£c c√†i. C√†i b·∫±ng: install-php $phpver"
        return 1
    fi

    echo "üîß Ch·∫°y composer v·ªõi PHP $phpver..."
    echo "üìù L·ªánh: composer $composer_cmd"
    
    # Ch·∫°y composer v·ªõi PHP version c·ª• th·ªÉ
    /opt/homebrew/opt/$php_formula/bin/php /opt/homebrew/bin/composer $composer_cmd
}

# Function ch·∫°y composer v·ªõi PHP version t·ª± ƒë·ªông t·ª´ .php-version file
composer-auto() {
    local composer_cmd="$@"
    
    # Ki·ªÉm tra file .php-version trong th∆∞ m·ª•c hi·ªán t·∫°i
    if [[ -f ".php-version" ]]; then
        local phpver=$(cat .php-version | tr -d '[:space:]')
        echo "üîç T√¨m th·∫•y .php-version: PHP $phpver"
        composer-with-php $phpver $composer_cmd
    else
        echo "‚ùå Kh√¥ng t√¨m th·∫•y file .php-version"
        echo "üí° T·∫°o file .php-version v·ªõi n·ªôi dung phi√™n b·∫£n PHP (v√≠ d·ª•: 8.2)"
        echo "üìù Ho·∫∑c s·ª≠ d·ª•ng: composer-with-php <version> <command>"
        return 1
    fi
}

# ===========================================
# ALIASES FOR FUNCTIONS
# ===========================================

# Alias ng·∫Øn g·ªçn cho composer v·ªõi PHP version
alias c8.2="composer-with-php 8.2"
alias c8.1="composer-with-php 8.1"
alias c8.0="composer-with-php 8.0"
alias c7.4="composer-with-php 7.4"
alias c7.3="composer-with-php 7.3"

# Alias cho composer t·ª± ƒë·ªông
alias ca="composer-auto"

# Project management shortcuts
alias pm="python3 ~/dev-tools/manage.py"
alias projects="python3 ~/dev-tools/manage.py"

# Alias cho PHP versions
alias php74='switch-php 7.4'
alias php80='switch-php 8.0'
alias php81='switch-php 8.1'
alias php82='switch-php 8.2'
alias php83='switch-php 8.3'
alias php84='switch-php 8.4'

# ===========================================
# ADDITIONAL ZSH CONFIGURATIONS
# ===========================================

# History
HISTSIZE=10000
SAVEHIST=10000
HISTFILE=~/.zsh_history

# Options
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_REDUCE_BLANKS
setopt HIST_SAVE_NO_DUPS
setopt SHARE_HISTORY

# Auto-completion
autoload -U compinit && compinit
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}'

# Case insensitive completion
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}'

# Auto-correction
setopt CORRECT

# Auto CD
setopt AUTO_CD

# ===========================================
# WELCOME MESSAGE
# ===========================================

echo "üêö Welcome to Zsh! (Migrated from Fish)"
echo "üí° Available commands: switch-php, install-php, composer-with-php, composer-auto"
echo "üöÄ Your Fish config has been successfully migrated!"
```

## üéØ T√≠nh nƒÉng ch√≠nh

### ‚ö° PHP Version Switching
```bash
switch-php 8.2    # Chuy·ªÉn sang PHP 8.2
php84             # Alias ng·∫Øn g·ªçn
```

### üé® Composer v·ªõi PHP version c·ª• th·ªÉ
```bash
composer-with-php 8.2 install
c8.2 install      # Alias ng·∫Øn g·ªçn
```

### üîç Auto-suggestions
- G√µ command s·∫Ω c√≥ g·ª£i √Ω t·ª´ history
- Gi·ªëng Fish shell

### üé® Syntax Highlighting
- Command ƒë√∫ng/sai c√≥ m√†u kh√°c nhau
- D·ªÖ nh·∫≠n bi·∫øt l·ªói syntax

### üîç FZF Integration
- `Ctrl+T` - T√¨m file
- `Ctrl+R` - T√¨m trong history
- `Ctrl+Alt+C` - CD v√†o th∆∞ m·ª•c

### üöÄ Project Management
- `mk project-name [php-version] [.test|.code]` - T·∫°o project nhanh
- `pm` - Qu·∫£n l√Ω projects (xem, m·ªü, x√≥a)
- `projects` - Xem danh s√°ch projects

### üåü Starship Prompt
- ƒê·∫πp v√† nhanh
- Hi·ªÉn th·ªã git status
- Full path directory
- Kh√¥ng hi·ªÉn th·ªã Python version

## üöÄ Restart Shell

Sau khi c√†i ƒë·∫∑t xong:
```bash
exec zsh
```

Ho·∫∑c m·ªü terminal m·ªõi.

## üìù So s√°nh v·ªõi Fish

| T√≠nh nƒÉng | Fish | Zsh + Oh My Zsh |
|-----------|------|-----------------|
| T∆∞∆°ng th√≠ch Bash | ‚ùå | ‚úÖ |
| Ecosystem | √çt | Kh·ªïng l·ªì |
| Auto-suggestions | ‚úÖ | ‚úÖ |
| Syntax highlighting | ‚úÖ | ‚úÖ |
| PHP switching | ‚úÖ | ‚úÖ |
| Composer integration | ‚úÖ | ‚úÖ |
| Server compatibility | ‚ùå | ‚úÖ |

## üéâ K·∫øt qu·∫£

Prompt s·∫Ω hi·ªÉn th·ªã:
```bash
/opt/homebrew/var/www/project-name on üå± main [‚úò] ‚ùØ
```

- Full path directory
- Git branch v√† status
- Clean, kh√¥ng c√≥ Python version
- Nhanh v√† responsive

## üîß Troubleshooting

### L·ªói "command not found"
```bash
source ~/.zshrc
```

### L·ªói Starship config
```bash
starship config --help
```

### Reset v·ªÅ Fish
```bash
chsh -s /opt/homebrew/bin/fish
```

---

**üéØ Zsh + Oh My Zsh + Starship = Perfect combo cho Laravel development!**
